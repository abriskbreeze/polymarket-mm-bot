# Polymarket Market-Making Bot Configuration
# Copy to .env and customize as needed

# ═══════════════════════════════════════════════════════════════════════════════
# TRADING MODE
# ═══════════════════════════════════════════════════════════════════════════════

# DRY_RUN=true: Paper trading with OrderSimulator (no real orders)
# DRY_RUN=false: Live trading (requires credentials)
DRY_RUN=true

# ═══════════════════════════════════════════════════════════════════════════════
# AUTHENTICATION (Required for LIVE trading)
# ═══════════════════════════════════════════════════════════════════════════════

# Generate these from your Polymarket account
# IMPORTANT: Use a dedicated trading wallet, never your personal wallet
POLY_PRIVATE_KEY=
POLY_API_KEY=
POLY_API_SECRET=
POLY_PASSPHRASE=

# ═══════════════════════════════════════════════════════════════════════════════
# NETWORK & API ENDPOINTS
# ═══════════════════════════════════════════════════════════════════════════════

CHAIN_ID=137
CLOB_API_URL=https://clob.polymarket.com
GAMMA_API_URL=https://gamma-api.polymarket.com

# ═══════════════════════════════════════════════════════════════════════════════
# WEBSOCKET SETTINGS
# ═══════════════════════════════════════════════════════════════════════════════

WS_MARKET_URL=wss://ws-subscriptions-clob.polymarket.com/ws/market
WS_RECONNECT_ATTEMPTS=10
WS_RECONNECT_BASE_DELAY=1.0
WS_RECONNECT_MAX_DELAY=60.0
WS_HEARTBEAT_INTERVAL=30.0
WS_STALE_DATA_THRESHOLD=60.0

# ═══════════════════════════════════════════════════════════════════════════════
# TRADING PARAMETERS
# ═══════════════════════════════════════════════════════════════════════════════

MAX_POSITION_PER_MARKET=100
MAX_ORDER_SIZE=50
MIN_ORDER_SIZE=5

# ═══════════════════════════════════════════════════════════════════════════════
# MARKET MAKING - Basic
# ═══════════════════════════════════════════════════════════════════════════════

MM_SPREAD=0.04              # Total spread (0.04 = 2 cents each side)
MM_SIZE=10                  # Order size in contracts
MM_REQUOTE_THRESHOLD=0.03   # Requote when mid moves this much
MM_POSITION_LIMIT=50        # Max position before skipping one side
MM_LOOP_INTERVAL=1.0        # Seconds between quote updates

# ═══════════════════════════════════════════════════════════════════════════════
# MARKET MAKING - Dynamic Spread
# ═══════════════════════════════════════════════════════════════════════════════

SPREAD_BASE=0.05            # Base spread before adjustments
SPREAD_MIN=0.02             # Minimum spread (floor)
SPREAD_MAX=0.10             # Maximum spread (ceiling)
INVENTORY_SKEW_MAX=0.02     # Max price skew from inventory

# ═══════════════════════════════════════════════════════════════════════════════
# MARKET SELECTION
# ═══════════════════════════════════════════════════════════════════════════════

MARKET_MIN_VOLUME=10000     # Minimum 24h volume ($)
MARKET_MIN_SPREAD=0.02      # Minimum spread (too tight = competitive)
MARKET_MAX_SPREAD=0.15      # Maximum spread (too wide = illiquid)
MARKET_MIN_HOURS_TO_RESOLUTION=12
MARKET_MIN_PRICE=0.05       # Avoid extreme prices (<5%)
MARKET_MAX_PRICE=0.95       # Avoid extreme prices (>95%)

# Scoring weights (must sum to 1.0)
MARKET_SCORE_WEIGHT_VOLUME=0.30
MARKET_SCORE_WEIGHT_SPREAD=0.35
MARKET_SCORE_WEIGHT_DEPTH=0.15
MARKET_SCORE_WEIGHT_TIMING=0.10
MARKET_SCORE_WEIGHT_PRICE=0.10

# ═══════════════════════════════════════════════════════════════════════════════
# VOLATILITY TRACKING
# ═══════════════════════════════════════════════════════════════════════════════

VOL_SAMPLE_INTERVAL=5.0     # Seconds between price samples
VOL_WINDOW_SECONDS=1800     # 30-minute rolling window
VOL_MIN_SAMPLES=10          # Min samples before calculating vol
VOL_MULT_MIN=0.5            # Spread multiplier in calm markets
VOL_MULT_MAX=3.0            # Spread multiplier in volatile markets

# ═══════════════════════════════════════════════════════════════════════════════
# BOOK ANALYSIS
# ═══════════════════════════════════════════════════════════════════════════════

BOOK_IMBALANCE_THRESHOLD=0.10    # 10% imbalance triggers adjustment
BOOK_DEPTH_CENTS=5.0             # Analyze depth within 5 cents
BOOK_TICK_IMPROVE=0.01           # Tick improvement amount

# ═══════════════════════════════════════════════════════════════════════════════
# RISK MANAGEMENT
# ═══════════════════════════════════════════════════════════════════════════════

RISK_MAX_DAILY_LOSS=50           # Daily loss limit ($)
RISK_MAX_POSITION=100            # Max position per token
RISK_MAX_TOTAL_EXPOSURE=500      # Total exposure across all tokens
RISK_ERROR_COOLDOWN=60           # Seconds to pause after errors
RISK_MAX_ERRORS_PER_MINUTE=5     # Error rate limit

# Enforce risk limits?
# false = log only (good for DRY_RUN data gathering)
# true = halt trading when limits hit
# Default: false in DRY_RUN, true in LIVE
RISK_ENFORCE=false

# ═══════════════════════════════════════════════════════════════════════════════
# ADVANCED RISK - Dynamic Limits
# ═══════════════════════════════════════════════════════════════════════════════

DYNAMIC_LIMIT_FLOOR=0.2          # Min limit multiplier
DYNAMIC_LIMIT_CEILING=2.0        # Max limit multiplier

# ═══════════════════════════════════════════════════════════════════════════════
# ADVANCED RISK - Adverse Selection Detection
# ═══════════════════════════════════════════════════════════════════════════════

ADVERSE_LOOKBACK_SECONDS=300     # 5 min lookback for toxicity
ADVERSE_TOXIC_THRESHOLD=0.4      # Toxic flow threshold
ADVERSE_HIGHLY_TOXIC_THRESHOLD=0.6
ADVERSE_PRICE_THRESHOLD=0.005    # 0.5 cent adverse move
ADVERSE_OBSERVATION_WINDOW=10    # Seconds to observe after fill

# ═══════════════════════════════════════════════════════════════════════════════
# ADVANCED RISK - Kelly Criterion Sizing
# ═══════════════════════════════════════════════════════════════════════════════

KELLY_FRACTION=0.25              # Fraction of Kelly to use
KELLY_MAX_POSITION=0.10          # Max 10% of bankroll per position
KELLY_MIN_TRADES=20              # Min trades before using Kelly

# ═══════════════════════════════════════════════════════════════════════════════
# ADVANCED RISK - Correlation
# ═══════════════════════════════════════════════════════════════════════════════

CORRELATION_THRESHOLD=0.5        # High correlation threshold
MAX_CORRELATED_EXPOSURE=500      # Max exposure to correlated markets

# ═══════════════════════════════════════════════════════════════════════════════
# ALPHA GENERATION - Arbitrage
# ═══════════════════════════════════════════════════════════════════════════════

ARB_MIN_PROFIT_BPS=20            # Min profit (basis points) to signal
ARB_SCAN_INTERVAL=5.0            # Seconds between scans

# ═══════════════════════════════════════════════════════════════════════════════
# ALPHA GENERATION - Order Flow
# ═══════════════════════════════════════════════════════════════════════════════

FLOW_WINDOW_SECONDS=60           # Flow analysis window
FLOW_AGGRESSIVE_WEIGHT=2.0       # Weight for aggressive orders
FLOW_IMBALANCE_THRESHOLD=0.15    # Imbalance to widen spread

# ═══════════════════════════════════════════════════════════════════════════════
# ALPHA GENERATION - Events
# ═══════════════════════════════════════════════════════════════════════════════

EVENT_RESOLUTION_WARNING_HOURS=24

# ═══════════════════════════════════════════════════════════════════════════════
# MARKET INTELLIGENCE - Competitor Detection
# ═══════════════════════════════════════════════════════════════════════════════

COMPETITOR_WINDOW_SIZE=1000
COMPETITOR_BACK_OFF_THRESHOLD=5000
COMPETITOR_SIZE_TOLERANCE=0.1
COMPETITOR_OFFSET_TOLERANCE=0.005

# ═══════════════════════════════════════════════════════════════════════════════
# MARKET INTELLIGENCE - Regime Detection
# ═══════════════════════════════════════════════════════════════════════════════

REGIME_WINDOW_SIZE=50
REGIME_HIGH_THRESHOLD=0.7
REGIME_LOW_THRESHOLD=0.3
REGIME_CRISIS_THRESHOLD=0.1
REGIME_SPREAD_WEIGHT=0.3
REGIME_DEPTH_WEIGHT=0.4
REGIME_VOLUME_WEIGHT=0.3

# ═══════════════════════════════════════════════════════════════════════════════
# MARKET INTELLIGENCE - Time Patterns
# ═══════════════════════════════════════════════════════════════════════════════

TIME_PATTERN_HISTORY=100

# ═══════════════════════════════════════════════════════════════════════════════
# EXECUTION OPTIMIZATION - Adaptive Timing
# ═══════════════════════════════════════════════════════════════════════════════

TIMING_BASE_INTERVAL=2.0         # Normal loop interval
TIMING_FAST_INTERVAL=0.1         # Fast mode interval
TIMING_SLEEP_INTERVAL=5.0        # Sleep mode interval
TIMING_VOL_THRESHOLD=0.01        # Volatility threshold for fast mode
TIMING_INACTIVITY_THRESHOLD=60.0 # Seconds of inactivity for sleep mode
TIMING_FAST_MODE_DURATION=10.0   # How long to stay in fast mode

# ═══════════════════════════════════════════════════════════════════════════════
# EXECUTION OPTIMIZATION - Queue Position
# ═══════════════════════════════════════════════════════════════════════════════

QUEUE_IMPROVE_THRESHOLD=100      # Queue depth to trigger improvement

# ═══════════════════════════════════════════════════════════════════════════════
# RATE LIMITING
# ═══════════════════════════════════════════════════════════════════════════════

RATE_LIMIT_ORDERS_PER_SECOND=5
RATE_LIMIT_DATA_PER_SECOND=10

# ═══════════════════════════════════════════════════════════════════════════════
# SIMULATION (DRY_RUN mode)
# ═══════════════════════════════════════════════════════════════════════════════

SIMULATED_FEE_RATE=0.001         # 0.1% simulated fee per trade
